<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Fundamentos Teóricos e Aplicações em Softwares">

<title>3&nbsp; Curva Característica da Operação e Compimento Médio da Sequência – CONTROLE ESTATÍSTICO DE QUALIDADE</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./C4_PlotOfAtributes.html" rel="next">
<link href="./C2_PlotOfVariables.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-364982630eef5352dd1537128a8ed5cb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./C3_CCO_CMS.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Curva Característica da Operação e Compimento Médio da Sequência</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CONTROLE ESTATÍSTICO DE QUALIDADE</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/csilv7/PROJECT_FINAL_SQC" title="Código fonte" class="quarto-navigation-tool px-1" aria-label="Código fonte"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C1_Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução ao Controle Estatístico de Qualidade</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C2_PlotOfVariables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Gráficos de Controle para Variáveis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C3_CCO_CMS.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Curva Característica da Operação e Compimento Médio da Sequência</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C4_PlotOfAtributes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Gráficos de Controle para Atributos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C5_IndCapacity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Índices de Capacidade</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referências</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#introdução" id="toc-introdução" class="nav-link active" data-scroll-target="#introdução"><span class="header-section-number">3.1</span> Introdução</a></li>
  <li><a href="#curva-característica-da-operação-cco" id="toc-curva-característica-da-operação-cco" class="nav-link" data-scroll-target="#curva-característica-da-operação-cco"><span class="header-section-number">3.2</span> Curva Característica da Operação (CCO)</a></li>
  <li><a href="#compimento-médio-da-sequência-cms" id="toc-compimento-médio-da-sequência-cms" class="nav-link" data-scroll-target="#compimento-médio-da-sequência-cms"><span class="header-section-number">3.3</span> Compimento Médio da Sequência (CMS)</a></li>
  <li><a href="#curva-característica-de-operação-cco-cdot-r" id="toc-curva-característica-de-operação-cco-cdot-r" class="nav-link" data-scroll-target="#curva-característica-de-operação-cco-cdot-r"><span class="header-section-number">3.4</span> Curva Característica de Operação (CCO <span class="math inline">\(\cdot R\)</span>)</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Curva Característica da Operação e Compimento Médio da Sequência</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Código</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Mostrar o código</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Esconder o código</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Ver o código fonte</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="progress">
<div class="progress-bar" style="width: 100%;">

</div>
</div>
<section id="introdução" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="introdução"><span class="header-section-number">3.1</span> Introdução</h2>
<p>Especificar o plano amostral, a frequência de coleta e os limites de controle de um processo são algumas das decisões críticas na construção de gráficos de controle. Na inviabilidade de inspecionar todos os itens produzidos, são selecionados uma certa quantidade por lote de forma aleatória para composição das amostras. Naturalmente, quanto mais itens amostrados, maior a aproximação da representação real do processo e consequente maior controle. Logo, as alternativas viáveis são, ou tomar amostras pequenas com maior frequência, ou amostras grandes com menor frequência <span class="citation" data-cites="Carpinetti2003 Montgomery2012Statistical">(<a href="references.html#ref-Carpinetti2003" role="doc-biblioref">Carpinetti 2003</a>; <a href="references.html#ref-Montgomery2012Statistical" role="doc-biblioref">Montgomery 2012</a>)</span>.</p>
<p>A depender do número defeitos presentes, o lote pode ser aceito ou rejeitado, parelho ao teste de hipóteses:</p>
<p><span class="math display">\[
\left\{ \begin{array} HH_0: p = p_0\\ H_1: p \neq p_0 \end{array} \right.
\]</span></p>
<p>onde <span class="math inline">\(p\)</span> representa a proporção de defeitos na produção <span class="citation" data-cites="Botter2013">(<a href="references.html#ref-Botter2013" role="doc-biblioref">Botter 2013</a>)</span>.</p>
<p>Quando estabelecemos limites de controle afastados da linha central, aumentamos a tolerância do processo, diminuindo assim o risco de ocorrer pontos fora dos limites. Esse risco é denominado erro tipo I (<span class="math inline">\(\alpha\)</span>) ou risco do produtor, responsável por indicar condições fora do controle sem causa atribuível (alarme falso).</p>
<p>A presença de baixos valores para o erro tipo I dificulta a detecção de defeitos reais, implicando no aumento de itens dentro dos limites de controle, quando o processo na realidade estiver fora de controle. A esse risco denominamos erro do tipo II (<span class="math inline">\(\beta\)</span>) ou risco do consumidor.</p>
<p>No caso de aproximação dos limites de controle da linha central gera o efeito contrário; quando o risco do produtor aumenta, o do consumidor diminui <span class="citation" data-cites="Montgomery2012Statistical Botter2013">(<a href="references.html#ref-Montgomery2012Statistical" role="doc-biblioref">Montgomery 2012</a>; <a href="references.html#ref-Botter2013" role="doc-biblioref">Botter 2013</a>)</span>. O cenário desejável é a identificação eficiente desses defeitos antes que ele seja repassado ao consumidor, garantindo a qualidade do produto.</p>
<p>Para um processo controlado sob condição de normalidade – <span class="math inline">\(X_{i} \sim N(\mu, \sigma^2)\)</span> – em um nível de operação (<span class="math inline">\(L\)</span>) temos que a probabilidade do processo estar sob controle é dada por</p>
<p><span class="math display">\[
P\left[LIC \leq \bar{X}_i \leq LSC \right] \Rightarrow P\left[\dfrac{\mu -L\sigma}{\sqrt{n}} \leq \bar{X}_i \leq \dfrac{\mu + L\sigma}{\sqrt{n}}\right],
\]</span> onde <span class="math inline">\(LIC\)</span> representa o limite inferior de controle e <span class="math inline">\(LSC\)</span>, o limite superior de controle, <span class="math inline">\(\sigma\)</span> o desvio-padrão da operação e <span class="math inline">\(n\)</span>, o número de amostras.</p>
<p>Para um processo operado em <span class="math inline">\(3\sigma\)</span> (<span class="math inline">\(L=3\)</span>), temos que <span class="math display">\[\therefore P\left[ \dfrac{\mu -3\sigma}{\sqrt{n}} \leq \bar{X}_i \leq \dfrac{\mu + 3\sigma}{\sqrt{n}}\right] = 0.9973.\]</span></p>
<p>Pela normalização dos dados – <span class="math inline">\(X_{i} \sim N(0, 1)\)</span>–, o erro tipo II corresponde a 99,73% e o erro tipo I a 0,27%. Em outras palavras, o processo acusará 27 alarmes falsos em 10.000 itens produzidos.</p>
</section>
<section id="curva-característica-da-operação-cco" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="curva-característica-da-operação-cco"><span class="header-section-number">3.2</span> Curva Característica da Operação (CCO)</h2>
<p>A capacidade dos gráficos <span class="math inline">\(\bar{X}\)</span> e <span class="math inline">\(R\)</span> de detectar mudanças no processo é descrita pelas chamadas Curvas Características de Operação (CCO), utilizadas na fase II de monitoramento de um processo. Considerando que a variabilidade do processo se mantém constante ao longo do tempo, <span class="math inline">\(\beta\)</span>, nesse caso, representa a probabilidade de <em>não</em> serem detectadas mudanças na média na amostra subsequente <span class="citation" data-cites="Montgomery2012Statistical">(<a href="references.html#ref-Montgomery2012Statistical" role="doc-biblioref">Montgomery 2012</a>)</span>.</p>
<p>Em termos probabilísticos, o risco do consumidor (<span class="math inline">\(\beta\)</span>) para uma dada média em um nível <span class="math inline">\(\mu_0\)</span> mudar para <span class="math inline">\(\mu_1\)</span>, sendo <span class="math inline">\(\mu_1 = \mu_0 + k\sigma\)</span>, pode descrito ser como</p>
<p><span class="math display">\[
\beta = P \left[ LIC \leq \bar{X} \leq LSC | \mu = \mu_1 = \mu_0 + k\sigma \right],
\]</span></p>
<p>onde <span class="math inline">\(k\)</span> representa o número de desvios (<span class="math inline">\(\sigma\)</span>) em relação à média (<span class="math inline">\(\mu_0\)</span>).</p>
<p>Levando em conta a média amostral com distribuição normal <span class="math inline">\(\bar{x} \sim N(\mu, \sigma^2/n)\)</span> e limites superior e inferior de controle <span class="math inline">\(LSE = \mu_0 + L\sigma/\sqrt{n}\)</span> e <span class="math inline">\(LIE = \mu_0 - L\sigma/\sqrt{n}\)</span>, os termos podem ser trabalhados em termos de função de distribuição cumulativa normal <span class="math inline">\(\Phi(\cdot)\)</span>. Desta forma, a função <span class="math inline">\(\beta\)</span> pode ser expressa como</p>
<p><span class="math display">\[ \beta = \Phi \left[\dfrac{LSE - \mu_1}{\sigma \sqrt{n}}\right] - \Phi \left[\dfrac{LIE + \mu_1}{\sigma \sqrt{n}}\right].
\]</span></p>
<p>A partir das definições, podemos realizar as substituições dos limites de controle amostrais e da nova média <span class="math inline">\(\mu_1\)</span>, resultando em</p>
<p><span class="math display">\[
\beta = \Phi \left[\dfrac{(\mu_0 + L\sigma/\sqrt{n}) - (\mu_0 + k\sigma)}{\sigma \sqrt{n}}\right] - \Phi \left[\dfrac{(\mu_0 - L\sigma/\sqrt{n}) + (\mu_0 + k\sigma)}{\sigma \sqrt{n}}\right].
\]</span></p>
<p>Fazendo os devidos ajustes de cálculo, a equação acima pode ser simplificada para</p>
<p><span class="math display">\[
\beta = \Phi \left[L - k\sqrt{n}\right] - \Phi \left[-L - k\sqrt{n}\right].
\]</span></p>
<p>Para ilustrar sua aplicação, tomemos um processo que opera em <span class="math inline">\(3\sigma\)</span>, coletando cinco amostras por inspeção (<span class="math inline">\(n=5\)</span>). Para determinar a probabilidade de deteção de mudança na média em dois desvios-padrão (<span class="math inline">\(k=2\)</span>) na primeira amostra após o deslocamento para <span class="math inline">\(\mu_1 = \mu_0 + 2\sigma\)</span>, incialmente calculamos a probaibilidade de <em>não-detecção</em> (<span class="math inline">\(\beta\)</span>):</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>L <span class="ot">=</span> <span class="dv">3</span> ; k <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>beta <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(beta, <span class="dv">4</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>[1] 0.0705</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> <span class="dv">3</span> <span class="op">;</span> k <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>beta <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">round</span>(beta, <span class="dv">4</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>0.0705</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Logo, a probabilidade de decteção do deslocamento é <span class="math inline">\(1-\beta = 1 - 0,0705 = 0,9295\)</span> ou 92,95%. De forma progressiva, podemos construir as CCOs para gráfico de médias (<span class="math inline">\(\bar{X}\)</span>) para diferentes números de amostra. A definição dos pontos da curva depende do cruzamento entre o valor do risco <span class="math inline">\(\beta\)</span> em relação a extensão do deslocamento (<span class="math inline">\(k\)</span>) para um número de amostras (<span class="math inline">\(n\)</span>).</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>L <span class="ot">=</span> <span class="dv">3</span>                             <span class="co"># Nível do processo </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>k <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="at">length.out =</span> <span class="dv">100</span>)   <span class="co"># Valores para deslocamento</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidade de detecção de mudanças (erro tipo II)</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>beta_1 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span>))     <span class="co"># para n = 1</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>beta_2 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>))     <span class="co"># para n = 2</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>beta_5 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>))     <span class="co"># para n = 5</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>beta_10 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">10</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">10</span>))  <span class="co"># para n = 10</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>beta_20 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>))  <span class="co"># para n = 20</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#par(mfrow = c(1, 1))</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_1, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"black"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_2, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="dv">1</span>,<span class="fu">pnorm</span>(L <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>)), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">cex =</span> <span class="fl">1.25</span>) </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_5, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_10, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_20, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"purple"</span>, <span class="at">axes=</span>T,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Deslocamento da Média (k)"</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Risco do Consumidor (β)"</span>,</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Curva Característica de Operação -- Gráfico X-bar"</span>,</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="dv">1</span>,<span class="fu">pnorm</span>(L <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>)), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">cex =</span> <span class="fl">1.25</span>) </span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">title=</span><span class="st">"Amostras"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty =</span> <span class="dv">2</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>     <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"n = 1"</span>, <span class="st">"n = 2"</span>, <span class="st">"n = 5"</span>, <span class="st">"n = 10"</span>, <span class="st">"n = 20"</span>),  </span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>, <span class="st">"purple"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p><img src="C3_CCO_CMS_files/figure-html/ccor-1.png" class="img-fluid" width="672"></p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> <span class="dv">3</span>                       <span class="co"># Nível do processo </span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">100</span>)  <span class="co"># Valores para deslocamento</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidade de detecção de mudanças (erro tipo II)</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>beta_1 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">1</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">1</span>))    <span class="co"># para n = 1</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>beta_2 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">2</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">2</span>))    <span class="co"># para n = 2</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>beta_5 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>))    <span class="co"># para n = 5</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>beta_10 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">10</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">10</span>)) <span class="co"># para n = 10</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>beta_20 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">20</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">20</span>)) <span class="co"># para n = 20</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_1, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"black"</span>, label <span class="op">=</span> <span class="st">'n = 1'</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_2, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"red"</span>, label <span class="op">=</span> <span class="st">'n = 2'</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="dv">1</span>, norm.cdf(L <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">2</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">2</span>)), <span class="st">'ro'</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_5, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"green"</span>, label <span class="op">=</span> <span class="st">'n = 5'</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_10, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"blue"</span>, label <span class="op">=</span> <span class="st">'n = 10'</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_20, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"purple"</span>, label <span class="op">=</span> <span class="st">'n = 20'</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="dv">1</span>, norm.cdf(L <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">20</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">20</span>)), <span class="st">'ro'</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Deslocamento da Média (k)'</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Risco do Consumidor (β)'</span>)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Curva Característica de Operação -- Gráfico X-bar'</span>)</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(0.0, 1.0)</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Amostras'</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">.3</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="C3_CCO_CMS_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>É notável que um número pequeno de amostras implica em um baixo poder de detecção. Por exemplo, em um caso de inspeção com duas amostras (<span class="math inline">\(n=2\)</span>, destacado no gráfico no ponto vermelho mais acima), a probabilidade de identificação de uma mudança em um desvio-padrão (<span class="math inline">\(k=1\)</span>) na amostra subsequente é de apenas 5,64% (<span class="math inline">\(\beta=0.9436 \therefore 1-\beta=0.0564\)</span>). Já com <span class="math inline">\(n=20\)</span> (ponto vermelho mais abaixo), a detecção efetiva nas mesmas condições é de 92,95% na primeira amostra após a mudança na média (<span class="math inline">\(\beta=0.0705 \therefore 1-\beta=0.9295\)</span>). Isso demonstra o comportamento natural de melhoria na detecção de defeitos conforme o número de amostras é ampliado.</p>
</section>
<section id="compimento-médio-da-sequência-cms" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="compimento-médio-da-sequência-cms"><span class="header-section-number">3.3</span> Compimento Médio da Sequência (CMS)</h2>
<p>Outra análise possível é a definição da probabilidade de identificar o deslocamento a cada nova amostra. Utilizando o exemplo já mencionado (<span class="math inline">\(L=3\)</span>, <span class="math inline">\(n=2\)</span>, <span class="math inline">\(k=1\)</span> e <span class="math inline">\(\beta = 0.9436\)</span>), a detecção de mudanças na segunda amostra é dado por <span class="math inline">\(\beta(1-\beta)\)</span>, isto é, a oscilação não foi apontada na primeira amostra (risco <span class="math inline">\(\beta\)</span>), ocorrendo na segunda amostra (<span class="math inline">\(1-\beta\)</span>). Desta forma, <span class="math inline">\(0.9436^1(1-0.9436) = 0.0532\)</span>, resultando em uma probabilidade de 5,32%. Na terceira, a probabilidade é dada por <span class="math inline">\(\beta^2(1-\beta)\)</span>, isto é, <span class="math inline">\(0.9436^2(1-0.9436) = 0.0502\)</span> ou 5,02%. Seguindo progressivamente a mesma lógica, a probabilidade de captar a oscilação da média na <span class="math inline">\(r\)</span>-ésima amostra pode ser generalizada por</p>
<p><span class="math display">\[
\beta^{r-1}(1-\beta).
\]</span></p>
<p>Buscando conhecer número médio de amostras coletadas até que um sinal seja emitido pelo gráfico de controle <span class="math inline">\(\bar{X}\)</span>, podemos descrever o quantitativo por meio de um somatório de <span class="math inline">\(\beta\)</span>, de tal forma que</p>
<p><span class="math display">\[
\sum_{i=1}^\infty \beta^{r=1}(1-\beta) = \dfrac{1}{1-\beta} = ARL.
\]</span></p>
<p>Essa medida é denominada <em>Comprimento Médio de Sequência</em> (ARL<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>), sendo utilizada para subsidiar decisões relativas ao tamanho da amostra e à frequência de amostragem. Na prática, indica quantos pontos de um processo consegue registrar antes que o gráfico aponte uma possível alteração ou desvio, seja ele dentro de controle (<span class="math inline">\(ARL_0\)</span>) ou fora de controle (<span class="math inline">\(ARL_1\)</span>).</p>
<p>Tomando como cenário um processo em <span class="math inline">\(3\sigma\)</span> sob controle, o risco de pontos fora de controle (erro tipo I) é de <span class="math inline">\(0.0027\)</span>. Logo, podemos calcular</p>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ARL_0 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> <span class="fl">0.0027</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(ARL_0, <span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>[1] 370.37</p>
<p>significando dizer que o processo acusará um alarme falso, em média, a cada 370 amostras. Em um caso alternativo, onde um processo com <span class="math inline">\(n=5\)</span> amostras coletadas tenha sofrido alguma alteração em sua média, o <span class="math inline">\(ARL_1\)</span> é dado por <span class="math display">\[
ARL_1 = \dfrac{1}{1-\beta} = \dfrac{1}{1 - \left\{ \Phi \left[L - k\sqrt{n}\right] - \Phi \left[-L - k\sqrt{n}\right] \right\}}.
\]</span></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>arl_1 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="dv">3</span> <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span><span class="dv">3</span> <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(arl_1, <span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.5</code></pre>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>arl_1 <span class="op">=</span>  <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> norm.cdf(<span class="dv">3</span> <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">5</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span><span class="dv">3</span> <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">5</span>)))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">round</span>(arl_1, <span class="dv">2</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>4.5</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Portanto, são necessárias aproximadamente cinco amostras coletadas para detecção de uma mudança de <span class="math inline">\(1\sigma\)</span> (<span class="math inline">\(k=1\)</span>).</p>
<p>Para a construção do gráfico de ARL considerando diferentes tamanhos de amostra (<span class="math inline">\(n\)</span>) e de deslocamentos da média (<span class="math inline">\(k\)</span>), temos que considerar o caso de ocorrência de pontos fora de controle (<span class="math inline">\(ARL_1\)</span>).</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>L <span class="ot">=</span> <span class="dv">3</span>                             <span class="co"># Nível do processo </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>k <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="at">length.out =</span> <span class="dv">100</span>)   <span class="co"># Valores para deslocamento</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprimento Médio de Sequência</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>ARL1 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span>))))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>ARL2 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>))))</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>ARL5 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>))))</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>ARL10 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">10</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">10</span>))))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>ARL20 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>))))</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL1, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"black"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL2, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL5, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL10, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL20, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"purple"</span>, <span class="at">axes=</span>T,</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">xlab =</span> <span class="st">"Deslocamento da Média (k)"</span>,</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">ylab =</span> <span class="st">"Comprimento Médio de Sequência (ARL)"</span>,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">main =</span> <span class="st">"Comprimento Médio de Sequência vs. Deslocamento da Média"</span>,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">400</span>))</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">title=</span><span class="st">"Amostras"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty =</span> <span class="dv">1</span>,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>     <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"n = 1"</span>, <span class="st">"n = 2"</span>, <span class="st">"n = 5"</span>, <span class="st">"n = 10"</span>, <span class="st">"n = 20"</span>),  </span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>, <span class="st">"purple"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="C3_CCO_CMS_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> <span class="dv">3</span>                       <span class="co"># Nível do processo </span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">100</span>)  <span class="co"># Valores para deslocamento</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprimento Médio de Sequência</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>ARL1 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">1</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">1</span>))))</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>ARL2 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">2</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">2</span>))))</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>ARL5 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>))))</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>ARL10 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">10</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">10</span>))))</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>ARL20 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">20</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">20</span>))))</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL1, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"black"</span>, label <span class="op">=</span> <span class="st">'n = 1'</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL2, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"red"</span>, label <span class="op">=</span> <span class="st">'n = 2'</span>)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL5, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"green"</span>, label <span class="op">=</span> <span class="st">'n = 5'</span>)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL10, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"blue"</span>, label <span class="op">=</span> <span class="st">'n = 10'</span>)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL20, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"purple"</span>, label <span class="op">=</span> <span class="st">'n = 20'</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Deslocamento da Média (k)'</span>)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Comprimento Médio de Sequência (ARL)'</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Comprimento Médio de Sequência vs. Deslocamento da Média'</span>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>,<span class="dv">400</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(0.0, 400.0)</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Amostras'</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">.3</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="C3_CCO_CMS_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="curva-característica-de-operação-cco-cdot-r" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="curva-característica-de-operação-cco-cdot-r"><span class="header-section-number">3.4</span> Curva Característica de Operação (CCO <span class="math inline">\(\cdot R\)</span>)</h2>
<p>Ao contrário da média, o gráfico de amplitude não apresenta uma distribuição simétrica, mesmo que a amostragem seja feita a partir de uma normalidade. Isso significa dizer que em um nível de operação de <span class="math inline">\(3\sigma\)</span> o risco <span class="math inline">\(\alpha\)</span> é diferente de <span class="math inline">\(0.0027\)</span>, resultante para a média.</p>
<p>Para a construção da CCO para o gráfico de amplitude, considera-se um intervalo relativo definido por <span class="math inline">\(W=R/\sigma\)</span>, com suas propriedades de média (<span class="math inline">\(E(W)=d_2\)</span>) e desvio-padrão (<span class="math inline">\(\sigma_W=d_3\)</span>). Supondo que os valores dentro dos limites de controle tenham um desvio <span class="math inline">\(\sigma_0\)</span> e a oscilação do gráfico tenha resultado em um novo desvio <span class="math inline">\(\sigma_1\)</span>, o risco <span class="math inline">\(\beta\)</span> é dado em função da razão dos desvios (<span class="math inline">\(\sigma_1&gt;\sigma_0 \Rightarrow \sigma_1 / \sigma_0 &gt; 1\)</span>).</p>
<p>Desta forma, o risco <span class="math inline">\(\beta\)</span> para um dado desvio <span class="math inline">\(\sigma\)</span>, em termos de amplitude, de um nível <span class="math inline">\(\sigma_0\)</span> mudar para <span class="math inline">\(\sigma_1\)</span>, sendo <span class="math inline">\(\sigma_1 = \lambda\sigma_0\)</span>, pode ser descrito como</p>
<p><span class="math display">\[\beta = P \left[ LIC \leq R \leq LSC | \sigma_1 = \lambda\sigma_0 \right]. \]</span></p>
<p>Considerando os limites inferior e superior de controle como <span class="math inline">\(LIE = D_3 \bar{R} = D_3\cdot d_2 \cdot \sigma_0\)</span> e <span class="math inline">\(LSE = D_4 \bar{R} = D_4\cdot d_2 \cdot \sigma_0\)</span>, respectivamente, podemos fazer os ajustes, de tal forma que</p>
<p><span class="math display">\[
\beta = P \left[ D_3\cdot d_2 \cdot \sigma_0 \leq R \leq D_4\cdot d_2 \cdot \sigma_0 | \sigma_1 = \lambda\sigma_0 \right].
\]</span></p>
<p>Dividindo todos os termos da expressão por <span class="math inline">\(\sigma_1\)</span>, temos que</p>
<p><span class="math display">\[
\beta = P \left[ \dfrac{D_3 d_2}{\lambda} \leq W \leq \dfrac{D_4 d_2}{\lambda} \right],
\]</span></p>
<p>onde <span class="math inline">\(\lambda\)</span> representa a razão entre os desvios (<span class="math inline">\(\lambda = \sigma_1 / \sigma_0\)</span>).</p>
<p>Fazendo a aproximação pela distribuição normal da medida relativa <span class="math inline">\(W \sim N(d_2, d_3^2)\)</span> com os respectivos limites de controle, os termos podem ser trabalhados em termos de função de distribuição cumulativa normal <span class="math inline">\(\Phi(\cdot)\)</span>. Desta forma, a função <span class="math inline">\(\beta\)</span> pode ser expressa como <span class="math display">\[ \beta = \Phi \left[\dfrac{\dfrac{D_4 d_2}{\lambda}-d_2}{d_3}\right] - \Phi \left[\dfrac{\dfrac{D_3 d_2}{\lambda}-d_2}{d_3}\right].
\]</span></p>
<p>Progressivamente, a construção das CCOs para diferentes números de amostra depende do cruzamento entre o risco <span class="math inline">\(\beta\)</span> e a distância entre os desvios (<span class="math inline">\(\lambda\)</span>).</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valores tabelados para d2, d3, D3 e D4</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.128</span>, <span class="fl">2.326</span>, <span class="fl">3.078</span>, <span class="fl">3.735</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>d3 <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.853</span>, <span class="fl">0.864</span>, <span class="fl">0.797</span>, <span class="fl">0.729</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>D3 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.223</span>, <span class="fl">0.415</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>D4 <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">3.267</span>, <span class="fl">2.115</span>, <span class="fl">1.777</span>, <span class="fl">1.585</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Diferentes valores para lambda (σ1/σ0)</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>lambda <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">6</span>, <span class="at">length.out=</span><span class="dv">100</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Cálculo de valores para beta</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>betal_2 <span class="ot">=</span> <span class="fu">pnorm</span>(((D4[<span class="dv">1</span>] <span class="sc">*</span> d2[<span class="dv">1</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">1</span>]) <span class="sc">/</span> d3[<span class="dv">1</span>]) <span class="sc">-</span> <span class="fu">pnorm</span>(((D3[<span class="dv">1</span>] <span class="sc">*</span> d2[<span class="dv">1</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">1</span>]) <span class="sc">/</span> d3[<span class="dv">1</span>])</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>betal_5 <span class="ot">=</span> <span class="fu">pnorm</span>(((D4[<span class="dv">2</span>] <span class="sc">*</span> d2[<span class="dv">2</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">2</span>]) <span class="sc">/</span> d3[<span class="dv">2</span>]) <span class="sc">-</span> <span class="fu">pnorm</span>(((D3[<span class="dv">2</span>] <span class="sc">*</span> d2[<span class="dv">2</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">2</span>]) <span class="sc">/</span> d3[<span class="dv">2</span>])</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>betal_10 <span class="ot">=</span> <span class="fu">pnorm</span>(((D4[<span class="dv">3</span>] <span class="sc">*</span> d2[<span class="dv">3</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">3</span>]) <span class="sc">/</span> d3[<span class="dv">3</span>]) <span class="sc">-</span> <span class="fu">pnorm</span>(((D3[<span class="dv">3</span>] <span class="sc">*</span> d2[<span class="dv">3</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">3</span>]) <span class="sc">/</span> d3[<span class="dv">3</span>])</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>betal_20 <span class="ot">=</span> <span class="fu">pnorm</span>(((D4[<span class="dv">4</span>] <span class="sc">*</span> d2[<span class="dv">4</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">4</span>]) <span class="sc">/</span> d3[<span class="dv">4</span>]) <span class="sc">-</span> <span class="fu">pnorm</span>(((D3[<span class="dv">4</span>] <span class="sc">*</span> d2[<span class="dv">4</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">4</span>]) <span class="sc">/</span> d3[<span class="dv">4</span>])</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico CCO -- R-bar</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lambda, betal_2, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lambda, betal_5, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, </span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lambda, beta_10, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lambda, betal_20, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, </span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"purple"</span>, <span class="at">axes=</span>T,</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="fu">expression</span>(<span class="st">"Razão dos desvios "</span> (lambda <span class="sc">==</span> <span class="fu">frac</span>(sigma[<span class="dv">1</span>], sigma[<span class="dv">0</span>]))),</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Risco do Consumidor (β)"</span>,</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Curva Característica de Operação -- Gráfico R-bar"</span>,</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">title=</span><span class="st">"Amostras"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty =</span> <span class="dv">1</span>,</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>     <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"n = 2"</span>, <span class="st">"n = 5"</span>, <span class="st">"n = 10"</span>, <span class="st">"n = 20"</span>),  </span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>, <span class="st">"purple"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p><img src="C3_CCO_CMS_files/figure-html/cco-rr-3.png" class="img-fluid" width="672"></p>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Valores tabelados para d2, d3, D3 e D4</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> [<span class="fl">1.128</span>, <span class="fl">2.326</span>, <span class="fl">3.078</span>, <span class="fl">3.735</span>]</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> [<span class="fl">0.853</span>, <span class="fl">0.864</span>, <span class="fl">0.797</span>, <span class="fl">0.729</span>]</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>D3 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.223</span>, <span class="fl">0.415</span>]</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>D4 <span class="op">=</span> [<span class="fl">3.267</span>, <span class="fl">2.115</span>, <span class="fl">1.777</span>, <span class="fl">1.585</span>]</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Diferentes valores para lambda (σ1/σ0)</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>lambdas<span class="op">=</span> np.linspace(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">100</span>) </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Cálculo de valores para beta</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>betal_2 <span class="op">=</span> norm.cdf(((D4[<span class="dv">0</span>] <span class="op">*</span> d2[<span class="dv">0</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">0</span>]) <span class="op">/</span> d3[<span class="dv">0</span>]) <span class="op">-</span> norm.cdf(((D3[<span class="dv">0</span>] <span class="op">*</span> d2[<span class="dv">0</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">0</span>]) <span class="op">/</span> d3[<span class="dv">0</span>])</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>betal_5 <span class="op">=</span> norm.cdf(((D4[<span class="dv">1</span>] <span class="op">*</span> d2[<span class="dv">1</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">1</span>]) <span class="op">/</span> d3[<span class="dv">1</span>]) <span class="op">-</span> norm.cdf(((D3[<span class="dv">1</span>] <span class="op">*</span> d2[<span class="dv">1</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">1</span>]) <span class="op">/</span> d3[<span class="dv">1</span>])</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>betal_10 <span class="op">=</span> norm.cdf(((D4[<span class="dv">2</span>] <span class="op">*</span> d2[<span class="dv">2</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">2</span>]) <span class="op">/</span> d3[<span class="dv">2</span>]) <span class="op">-</span> norm.cdf(((D3[<span class="dv">2</span>] <span class="op">*</span> d2[<span class="dv">2</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">2</span>]) <span class="op">/</span> d3[<span class="dv">2</span>])</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>betal_20 <span class="op">=</span> norm.cdf(((D4[<span class="dv">3</span>] <span class="op">*</span> d2[<span class="dv">3</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">3</span>]) <span class="op">/</span> d3[<span class="dv">3</span>]) <span class="op">-</span> norm.cdf(((D3[<span class="dv">3</span>] <span class="op">*</span> d2[<span class="dv">3</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">3</span>]) <span class="op">/</span> d3[<span class="dv">3</span>])</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico CCO -- R-bar</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>plt.plot(lambdas, betal_2, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"red"</span>, label <span class="op">=</span> <span class="st">'n = 2'</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>plt.plot(lambdas, betal_5, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"green"</span>, label <span class="op">=</span> <span class="st">'n = 5'</span>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>plt.plot(lambdas, betal_10, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"blue"</span>, label <span class="op">=</span> <span class="st">'n = 10'</span>)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>plt.plot(lambdas, betal_20, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"purple"</span>, label <span class="op">=</span> <span class="st">'n = 20'</span>)</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="vs">r'Razão dos desvios </span><span class="dv">$</span><span class="er">\</span><span class="vs">lambda = </span><span class="dv">\s</span><span class="vs">igma_1/</span><span class="dv">\s</span><span class="vs">igma_0</span><span class="dv">$</span><span class="vs">'</span>)</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Risco do Consumidor (β)'</span>)</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Comprimento Médio de Sequência vs. Deslocamento da Média'</span>)</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(0.0, 1.0)</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Amostras'</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">.3</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="C3_CCO_CMS_files/figure-html/unnamed-chunk-8-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Nota-se que a CCO <span class="math inline">\(\cdot R\)</span> não demonstra bons resultados na detecção de mudanças para valores pequenos de amostra. Isso pode ser observado comparando os casos de <span class="math inline">\(n=2\)</span> e <span class="math inline">\(n=20\)</span>; se o desvio padrão do processo dobrar (isto é, <span class="math inline">\(\lambda = \sigma_1/\sigma_0 = 2\)</span>), o primeiro caso tem cerca de 30% de chance em detectar a mudança na amostra subsequente; já no segundo caso, a chance alcança 90%. Por esse motivo, a literatura recomenda o uso do gráfico <span class="math inline">\(R\)</span> para subamostras racionais maiores que 10 <span class="citation" data-cites="Montgomery2012Statistical">(<a href="references.html#ref-Montgomery2012Statistical" role="doc-biblioref">Montgomery 2012</a>)</span>.</p>
<div class="progress">
<div class="progress-bar" style="width: 100%;">

</div>
</div>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Botter2013" class="csl-entry" role="listitem">
Botter, Denise Aparecida. 2013. <span>«Inspeção de Qualidade»</span>. Notas de Aula. <a href="https://www.ime.usp.br/~botter/mae532/Inspecao.pdf">https://www.ime.usp.br/~botter/mae532/Inspecao.pdf</a>.
</div>
<div id="ref-Carpinetti2003" class="csl-entry" role="listitem">
Carpinetti, Luiz C. R. 2003. <em>Controle da Qualidade de Processo</em>. 2.ª ed. Universidade de São Paulo.
</div>
<div id="ref-Montgomery2012Statistical" class="csl-entry" role="listitem">
Montgomery, Douglas C. 2012. <em>Statistical <span>Quality</span> <span>Control</span></em>. 7.ª ed. John Wiley &amp; Sons.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>acrônimo em inglês para <em>Average Run Length</em><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./C2_PlotOfVariables.html" class="pagination-link" aria-label="Gráficos de Controle para Variáveis">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Gráficos de Controle para Variáveis</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./C4_PlotOfAtributes.html" class="pagination-link" aria-label="Gráficos de Controle para Atributos">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Gráficos de Controle para Atributos</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Código fonte</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb21" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>:::: progress</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>:::: {.progress-bar style="width: 100%;"}</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># Curva Característica da Operação e Compimento Médio da Sequência</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=FALSE, echo=FALSE}</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="fu">use_python</span>(<span class="st">"C:/Users/user/anaconda3/python.exe"</span>, <span class="at">required =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introdução</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>Especificar o plano amostral, a frequência de coleta e os limites de controle de um processo são algumas das decisões críticas na construção de gráficos de controle. Na inviabilidade de inspecionar todos os itens produzidos, são selecionados uma certa quantidade por lote de forma aleatória para composição das amostras. Naturalmente, quanto mais itens amostrados, maior a aproximação da representação real do processo e consequente maior controle. Logo, as alternativas viáveis são, ou tomar amostras pequenas com maior frequência, ou amostras grandes com menor frequência <span class="co">[</span><span class="ot">@Carpinetti2003; @Montgomery2012Statistical</span><span class="co">]</span>. </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>A depender do número defeitos presentes, o lote pode ser aceito ou rejeitado, parelho ao teste de hipóteses:</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>\left<span class="sc">\{</span> \begin{array} HH_0: p = p_0<span class="sc">\\</span> H_1: p \neq p_0 \end{array} \right.</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>onde $p$ representa a proporção de defeitos na produção <span class="co">[</span><span class="ot">@Botter2013</span><span class="co">]</span>.</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>Quando estabelecemos limites de controle afastados da linha central, aumentamos a tolerância do processo, diminuindo assim o risco de ocorrer pontos fora dos limites. Esse risco é denominado erro tipo I ($\alpha$) ou risco do produtor, responsável por indicar condições fora do controle sem causa atribuível (alarme falso).</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>A presença de baixos valores para o erro tipo I dificulta a detecção de defeitos reais, implicando no aumento de itens dentro dos limites de controle, quando o processo na realidade estiver fora de controle. A esse risco denominamos erro do tipo II ($\beta$) ou risco do consumidor. </span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>No caso de aproximação dos limites de controle da linha central gera o efeito contrário; quando o risco do produtor aumenta, o do consumidor diminui <span class="co">[</span><span class="ot">@Montgomery2012Statistical; @Botter2013</span><span class="co">]</span>. O cenário desejável é a identificação eficiente desses defeitos antes que ele seja repassado ao consumidor, garantindo a qualidade do produto.</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>Para um processo controlado sob condição de normalidade -- $X_{i} \sim N(\mu, \sigma^2)$ -- em um nível de operação ($L$) temos que a probabilidade do processo estar sob controle é dada por </span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>$$ </span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>P\left<span class="co">[</span><span class="ot">LIC \leq \bar{X}_i \leq LSC \right</span><span class="co">]</span> \Rightarrow P\left<span class="co">[</span><span class="ot">\dfrac{\mu -L\sigma}{\sqrt{n}} \leq \bar{X}_i \leq \dfrac{\mu + L\sigma}{\sqrt{n}}\right</span><span class="co">]</span>,</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>onde $LIC$ representa o limite inferior de controle e $LSC$, o limite superior de controle, $\sigma$ o desvio-padrão da operação e $n$, o número de amostras.</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>Para um processo operado em $3\sigma$ ($L=3$), temos que $$\therefore P\left<span class="co">[</span><span class="ot"> \dfrac{\mu -3\sigma}{\sqrt{n}} \leq \bar{X}_i \leq \dfrac{\mu + 3\sigma}{\sqrt{n}}\right</span><span class="co">]</span> = 0.9973.$$</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>Pela normalização dos dados -- $X_{i} \sim N(0, 1)$--, o erro tipo II corresponde a 99,73% e o erro tipo I a 0,27%. Em outras palavras, o processo acusará 27 alarmes falsos em 10.000 itens produzidos.</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a><span class="fu">## Curva Característica da Operação (CCO)</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>A capacidade dos gráficos $\bar{X}$ e $R$ de detectar mudanças no processo é descrita pelas chamadas Curvas Características de Operação (CCO), utilizadas na fase II de monitoramento de um processo. Considerando que a variabilidade do processo se mantém constante ao longo do tempo, $\beta$, nesse caso, representa a probabilidade de *não* serem detectadas mudanças na média na amostra subsequente <span class="co">[</span><span class="ot">@Montgomery2012Statistical</span><span class="co">]</span>.</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>Em termos probabilísticos, o risco do consumidor ($\beta$) para uma dada média em um nível $\mu_0$ mudar para $\mu_1$, sendo $\mu_1 = \mu_0 + k\sigma$, pode descrito ser como</span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>\beta = P \left<span class="co">[</span><span class="ot"> LIC \leq \bar{X} \leq LSC | \mu = \mu_1 = \mu_0 + k\sigma \right</span><span class="co">]</span>,</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>onde $k$ representa o número de desvios ($\sigma$) em relação à média ($\mu_0$).</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>Levando em conta a média amostral com distribuição normal $\bar{x} \sim N(\mu, \sigma^2/n)$ e limites superior e inferior de controle $LSE = \mu_0 + L\sigma/\sqrt{n}$ e $LIE = \mu_0 - L\sigma/\sqrt{n}$, os termos podem ser trabalhados em termos de função de distribuição cumulativa normal $\Phi(\cdot)$. Desta forma, a função $\beta$ pode ser expressa como</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>$$ \beta = \Phi \left<span class="co">[</span><span class="ot">\dfrac{LSE - \mu_1}{\sigma \sqrt{n}}\right</span><span class="co">]</span> - \Phi \left<span class="co">[</span><span class="ot">\dfrac{LIE + \mu_1}{\sigma \sqrt{n}}\right</span><span class="co">]</span>. </span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>A partir das definições, podemos realizar as substituições dos limites de controle amostrais e da nova média $\mu_1$, resultando em</span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>$$ </span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a>\beta = \Phi \left<span class="co">[</span><span class="ot">\dfrac{(\mu_0 + L\sigma/\sqrt{n}) - (\mu_0 + k\sigma)}{\sigma \sqrt{n}}\right</span><span class="co">]</span> - \Phi \left<span class="co">[</span><span class="ot">\dfrac{(\mu_0 - L\sigma/\sqrt{n}) + (\mu_0 + k\sigma)}{\sigma \sqrt{n}}\right</span><span class="co">]</span>.</span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>Fazendo os devidos ajustes de cálculo, a equação acima pode ser simplificada para</span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>\beta = \Phi \left<span class="co">[</span><span class="ot">L - k\sqrt{n}\right</span><span class="co">]</span> - \Phi \left<span class="co">[</span><span class="ot">-L - k\sqrt{n}\right</span><span class="co">]</span>.</span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a>Para ilustrar sua aplicação, tomemos um processo que opera em $3\sigma$, coletando cinco amostras por inspeção ($n=5$). Para determinar a probabilidade de deteção de mudança na média em dois desvios-padrão ($k=2$) na primeira amostra após o deslocamento para $\mu_1 = \mu_0 + 2\sigma$, incialmente calculamos a probaibilidade de *não-detecção* ($\beta$): </span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a><span class="fu">### R</span></span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a><span class="in">```{r exbeta, echo=T, include=T, cache=T, results="asis", warning=F}</span></span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a>L <span class="ot">=</span> <span class="dv">3</span> ; k <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a>beta <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>))</span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(beta, <span class="dv">4</span>)</span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a><span class="fu">### Python</span></span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> <span class="dv">3</span> <span class="op">;</span> k <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a>beta <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>))</span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">round</span>(beta, <span class="dv">4</span>))</span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a>Logo, a probabilidade de decteção do deslocamento é $1-\beta = 1 - 0,0705 = 0,9295$ ou 92,95%. De forma progressiva, podemos construir as CCOs para gráfico de médias ($\bar{X}$) para diferentes números de amostra. A definição dos pontos da curva depende do cruzamento entre o valor do risco $\beta$ em relação a extensão do deslocamento ($k$) para um número de amostras ($n$).</span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a><span class="fu">### R</span></span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ccor, echo=T, include=T, cache=T, results="asis", warning=F}</span></span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a>L <span class="ot">=</span> <span class="dv">3</span>                             <span class="co"># Nível do processo </span></span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a>k <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="at">length.out =</span> <span class="dv">100</span>)   <span class="co"># Valores para deslocamento</span></span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-105"><a href="#cb21-105" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidade de detecção de mudanças (erro tipo II)</span></span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a>beta_1 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span>))     <span class="co"># para n = 1</span></span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a>beta_2 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>))     <span class="co"># para n = 2</span></span>
<span id="cb21-108"><a href="#cb21-108" aria-hidden="true" tabindex="-1"></a>beta_5 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>))     <span class="co"># para n = 5</span></span>
<span id="cb21-109"><a href="#cb21-109" aria-hidden="true" tabindex="-1"></a>beta_10 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">10</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">10</span>))  <span class="co"># para n = 10</span></span>
<span id="cb21-110"><a href="#cb21-110" aria-hidden="true" tabindex="-1"></a>beta_20 <span class="ot">=</span> <span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>))  <span class="co"># para n = 20</span></span>
<span id="cb21-111"><a href="#cb21-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-112"><a href="#cb21-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb21-113"><a href="#cb21-113" aria-hidden="true" tabindex="-1"></a><span class="co">#par(mfrow = c(1, 1))</span></span>
<span id="cb21-114"><a href="#cb21-114" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_1, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb21-115"><a href="#cb21-115" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"black"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-116"><a href="#cb21-116" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-117"><a href="#cb21-117" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_2, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb21-118"><a href="#cb21-118" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-119"><a href="#cb21-119" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="dv">1</span>,<span class="fu">pnorm</span>(L <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>)), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">cex =</span> <span class="fl">1.25</span>) </span>
<span id="cb21-120"><a href="#cb21-120" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-121"><a href="#cb21-121" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_5, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb21-122"><a href="#cb21-122" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-123"><a href="#cb21-123" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-124"><a href="#cb21-124" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_10, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb21-125"><a href="#cb21-125" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-126"><a href="#cb21-126" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-127"><a href="#cb21-127" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, beta_20, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb21-128"><a href="#cb21-128" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"purple"</span>, <span class="at">axes=</span>T,</span>
<span id="cb21-129"><a href="#cb21-129" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Deslocamento da Média (k)"</span>,</span>
<span id="cb21-130"><a href="#cb21-130" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Risco do Consumidor (β)"</span>,</span>
<span id="cb21-131"><a href="#cb21-131" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Curva Característica de Operação -- Gráfico X-bar"</span>,</span>
<span id="cb21-132"><a href="#cb21-132" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb21-133"><a href="#cb21-133" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="dv">1</span>,<span class="fu">pnorm</span>(L <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>)), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">cex =</span> <span class="fl">1.25</span>) </span>
<span id="cb21-134"><a href="#cb21-134" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb21-135"><a href="#cb21-135" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">title=</span><span class="st">"Amostras"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty =</span> <span class="dv">2</span>,</span>
<span id="cb21-136"><a href="#cb21-136" aria-hidden="true" tabindex="-1"></a>     <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"n = 1"</span>, <span class="st">"n = 2"</span>, <span class="st">"n = 5"</span>, <span class="st">"n = 10"</span>, <span class="st">"n = 20"</span>),  </span>
<span id="cb21-137"><a href="#cb21-137" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>, <span class="st">"purple"</span>))</span>
<span id="cb21-138"><a href="#cb21-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-139"><a href="#cb21-139" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-140"><a href="#cb21-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-141"><a href="#cb21-141" aria-hidden="true" tabindex="-1"></a><span class="fu">### Python</span></span>
<span id="cb21-142"><a href="#cb21-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-145"><a href="#cb21-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-146"><a href="#cb21-146" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-147"><a href="#cb21-147" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb21-148"><a href="#cb21-148" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb21-149"><a href="#cb21-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-150"><a href="#cb21-150" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> <span class="dv">3</span>                       <span class="co"># Nível do processo </span></span>
<span id="cb21-151"><a href="#cb21-151" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">100</span>)  <span class="co"># Valores para deslocamento</span></span>
<span id="cb21-152"><a href="#cb21-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-153"><a href="#cb21-153" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidade de detecção de mudanças (erro tipo II)</span></span>
<span id="cb21-154"><a href="#cb21-154" aria-hidden="true" tabindex="-1"></a>beta_1 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">1</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">1</span>))    <span class="co"># para n = 1</span></span>
<span id="cb21-155"><a href="#cb21-155" aria-hidden="true" tabindex="-1"></a>beta_2 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">2</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">2</span>))    <span class="co"># para n = 2</span></span>
<span id="cb21-156"><a href="#cb21-156" aria-hidden="true" tabindex="-1"></a>beta_5 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>))    <span class="co"># para n = 5</span></span>
<span id="cb21-157"><a href="#cb21-157" aria-hidden="true" tabindex="-1"></a>beta_10 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">10</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">10</span>)) <span class="co"># para n = 10</span></span>
<span id="cb21-158"><a href="#cb21-158" aria-hidden="true" tabindex="-1"></a>beta_20 <span class="op">=</span> norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">20</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">20</span>)) <span class="co"># para n = 20</span></span>
<span id="cb21-159"><a href="#cb21-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-160"><a href="#cb21-160" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb21-161"><a href="#cb21-161" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_1, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"black"</span>, label <span class="op">=</span> <span class="st">'n = 1'</span>)</span>
<span id="cb21-162"><a href="#cb21-162" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_2, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"red"</span>, label <span class="op">=</span> <span class="st">'n = 2'</span>)</span>
<span id="cb21-163"><a href="#cb21-163" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="dv">1</span>, norm.cdf(L <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">2</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">2</span>)), <span class="st">'ro'</span>)</span>
<span id="cb21-164"><a href="#cb21-164" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_5, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"green"</span>, label <span class="op">=</span> <span class="st">'n = 5'</span>)</span>
<span id="cb21-165"><a href="#cb21-165" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_10, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"blue"</span>, label <span class="op">=</span> <span class="st">'n = 10'</span>)</span>
<span id="cb21-166"><a href="#cb21-166" aria-hidden="true" tabindex="-1"></a>plt.plot(k, beta_20, linestyle <span class="op">=</span> <span class="st">'--'</span>, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"purple"</span>, label <span class="op">=</span> <span class="st">'n = 20'</span>)</span>
<span id="cb21-167"><a href="#cb21-167" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="dv">1</span>, norm.cdf(L <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">20</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">20</span>)), <span class="st">'ro'</span>)</span>
<span id="cb21-168"><a href="#cb21-168" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Deslocamento da Média (k)'</span>)</span>
<span id="cb21-169"><a href="#cb21-169" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Risco do Consumidor (β)'</span>)</span>
<span id="cb21-170"><a href="#cb21-170" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Curva Característica de Operação -- Gráfico X-bar'</span>)</span>
<span id="cb21-171"><a href="#cb21-171" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb21-172"><a href="#cb21-172" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Amostras'</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb21-173"><a href="#cb21-173" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">.3</span>)</span>
<span id="cb21-174"><a href="#cb21-174" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb21-175"><a href="#cb21-175" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-176"><a href="#cb21-176" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-177"><a href="#cb21-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-178"><a href="#cb21-178" aria-hidden="true" tabindex="-1"></a>É notável que um número pequeno de amostras implica em um baixo poder de detecção. Por exemplo, em um caso de inspeção com duas amostras ($n=2$, destacado no gráfico no ponto vermelho mais acima), a probabilidade de identificação de uma mudança em um desvio-padrão ($k=1$) na amostra subsequente é de apenas 5,64% ($\beta=0.9436 \therefore 1-\beta=0.0564$). Já com $n=20$ (ponto vermelho mais abaixo), a detecção efetiva nas mesmas condições é de 92,95% na primeira amostra após a mudança na média ($\beta=0.0705 \therefore 1-\beta=0.9295$). Isso demonstra o comportamento natural de melhoria na detecção de defeitos conforme o número de amostras é ampliado.</span>
<span id="cb21-179"><a href="#cb21-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-180"><a href="#cb21-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-181"><a href="#cb21-181" aria-hidden="true" tabindex="-1"></a><span class="fu">## Compimento Médio da Sequência (CMS)</span></span>
<span id="cb21-182"><a href="#cb21-182" aria-hidden="true" tabindex="-1"></a>Outra análise possível é a definição da probabilidade de identificar o deslocamento a cada nova amostra. Utilizando o exemplo já mencionado ($L=3$, $n=2$, $k=1$ e $\beta = 0.9436$), a detecção de mudanças na segunda amostra é dado por $\beta(1-\beta)$, isto é, a oscilação não foi apontada na primeira amostra (risco $\beta$), ocorrendo na segunda amostra ($1-\beta$). Desta forma, $0.9436^1(1-0.9436) = 0.0532$, resultando em uma probabilidade de 5,32%. Na terceira, a probabilidade é dada por $\beta^2(1-\beta)$, isto é, $0.9436^2(1-0.9436) = 0.0502$ ou 5,02%. Seguindo progressivamente a mesma lógica, a probabilidade de captar a oscilação da média na $r$-ésima amostra pode ser generalizada por</span>
<span id="cb21-183"><a href="#cb21-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-184"><a href="#cb21-184" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-185"><a href="#cb21-185" aria-hidden="true" tabindex="-1"></a>\beta^{r-1}(1-\beta).</span>
<span id="cb21-186"><a href="#cb21-186" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-187"><a href="#cb21-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-188"><a href="#cb21-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-189"><a href="#cb21-189" aria-hidden="true" tabindex="-1"></a>Buscando conhecer número médio de amostras coletadas até que um sinal seja emitido pelo gráfico de controle $\bar{X}$, podemos descrever o quantitativo por meio de um somatório de $\beta$, de tal forma que </span>
<span id="cb21-190"><a href="#cb21-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-191"><a href="#cb21-191" aria-hidden="true" tabindex="-1"></a>$$ </span>
<span id="cb21-192"><a href="#cb21-192" aria-hidden="true" tabindex="-1"></a>\sum_{i=1}^\infty \beta^{r=1}(1-\beta) = \dfrac{1}{1-\beta} = ARL. </span>
<span id="cb21-193"><a href="#cb21-193" aria-hidden="true" tabindex="-1"></a>$$ </span>
<span id="cb21-194"><a href="#cb21-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-195"><a href="#cb21-195" aria-hidden="true" tabindex="-1"></a>Essa medida é denominada *Comprimento Médio de Sequência* (ARL^[acrônimo em inglês para *Average Run Length*]), sendo utilizada para subsidiar decisões relativas ao tamanho da amostra e à frequência de amostragem. Na prática, indica quantos pontos de um processo consegue registrar antes que o gráfico aponte uma possível alteração ou desvio, seja ele dentro de controle ($ARL_0$) ou fora de controle ($ARL_1$). </span>
<span id="cb21-196"><a href="#cb21-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-197"><a href="#cb21-197" aria-hidden="true" tabindex="-1"></a>Tomando como cenário um processo em $3\sigma$ sob controle, o risco de pontos fora de controle (erro tipo I) é de $0.0027$. Logo, podemos calcular </span>
<span id="cb21-198"><a href="#cb21-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-199"><a href="#cb21-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r arl-exemplo, echo=T, include=T, cache=T, results="asis", warning=F}</span></span>
<span id="cb21-200"><a href="#cb21-200" aria-hidden="true" tabindex="-1"></a>ARL_0 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> <span class="fl">0.0027</span></span>
<span id="cb21-201"><a href="#cb21-201" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(ARL_0, <span class="dv">2</span>)</span>
<span id="cb21-202"><a href="#cb21-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-203"><a href="#cb21-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-204"><a href="#cb21-204" aria-hidden="true" tabindex="-1"></a>significando dizer que o processo acusará um alarme falso, em média, a cada 370 amostras. Em um caso alternativo, onde um processo com $n=5$ amostras coletadas tenha sofrido alguma alteração em sua média, o $ARL_1$ é dado por </span>
<span id="cb21-205"><a href="#cb21-205" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-206"><a href="#cb21-206" aria-hidden="true" tabindex="-1"></a>ARL_1 = \dfrac{1}{1-\beta} = \dfrac{1}{1 - \left<span class="sc">\{</span> \Phi \left<span class="co">[</span><span class="ot">L - k\sqrt{n}\right</span><span class="co">]</span> - \Phi \left<span class="co">[</span><span class="ot">-L - k\sqrt{n}\right</span><span class="co">]</span> \right<span class="sc">\}</span>}. </span>
<span id="cb21-207"><a href="#cb21-207" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-208"><a href="#cb21-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-209"><a href="#cb21-209" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb21-210"><a href="#cb21-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-211"><a href="#cb21-211" aria-hidden="true" tabindex="-1"></a><span class="fu">### R</span></span>
<span id="cb21-212"><a href="#cb21-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-215"><a href="#cb21-215" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-216"><a href="#cb21-216" aria-hidden="true" tabindex="-1"></a>arl_1 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="dv">3</span> <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span><span class="dv">3</span> <span class="sc">-</span> <span class="dv">1</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)))</span>
<span id="cb21-217"><a href="#cb21-217" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(arl_1, <span class="dv">2</span>)</span>
<span id="cb21-218"><a href="#cb21-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-219"><a href="#cb21-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-220"><a href="#cb21-220" aria-hidden="true" tabindex="-1"></a><span class="fu">### Python</span></span>
<span id="cb21-221"><a href="#cb21-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-224"><a href="#cb21-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-225"><a href="#cb21-225" aria-hidden="true" tabindex="-1"></a>arl_1 <span class="op">=</span>  <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> norm.cdf(<span class="dv">3</span> <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">5</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span><span class="dv">3</span> <span class="op">-</span> <span class="dv">1</span><span class="op">*</span>np.sqrt(<span class="dv">5</span>)))</span>
<span id="cb21-226"><a href="#cb21-226" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">round</span>(arl_1, <span class="dv">2</span>))</span>
<span id="cb21-227"><a href="#cb21-227" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-228"><a href="#cb21-228" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-229"><a href="#cb21-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-230"><a href="#cb21-230" aria-hidden="true" tabindex="-1"></a>Portanto, são necessárias aproximadamente cinco amostras coletadas para detecção de uma mudança de $1\sigma$ ($k=1$).</span>
<span id="cb21-231"><a href="#cb21-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-232"><a href="#cb21-232" aria-hidden="true" tabindex="-1"></a>Para a construção do gráfico de ARL considerando diferentes tamanhos de amostra ($n$) e de deslocamentos da média ($k$), temos que considerar o caso de ocorrência de pontos fora de controle ($ARL_1$).</span>
<span id="cb21-233"><a href="#cb21-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-234"><a href="#cb21-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-235"><a href="#cb21-235" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb21-236"><a href="#cb21-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-237"><a href="#cb21-237" aria-hidden="true" tabindex="-1"></a><span class="fu">### R</span></span>
<span id="cb21-238"><a href="#cb21-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-241"><a href="#cb21-241" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-242"><a href="#cb21-242" aria-hidden="true" tabindex="-1"></a>L <span class="ot">=</span> <span class="dv">3</span>                             <span class="co"># Nível do processo </span></span>
<span id="cb21-243"><a href="#cb21-243" aria-hidden="true" tabindex="-1"></a>k <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="at">length.out =</span> <span class="dv">100</span>)   <span class="co"># Valores para deslocamento</span></span>
<span id="cb21-244"><a href="#cb21-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-245"><a href="#cb21-245" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprimento Médio de Sequência</span></span>
<span id="cb21-246"><a href="#cb21-246" aria-hidden="true" tabindex="-1"></a>ARL1 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span>))))</span>
<span id="cb21-247"><a href="#cb21-247" aria-hidden="true" tabindex="-1"></a>ARL2 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span>))))</span>
<span id="cb21-248"><a href="#cb21-248" aria-hidden="true" tabindex="-1"></a>ARL5 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">5</span>))))</span>
<span id="cb21-249"><a href="#cb21-249" aria-hidden="true" tabindex="-1"></a>ARL10 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">10</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">10</span>))))</span>
<span id="cb21-250"><a href="#cb21-250" aria-hidden="true" tabindex="-1"></a>ARL20 <span class="ot">=</span>  <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="fu">pnorm</span>(L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>L <span class="sc">-</span> k<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">20</span>))))</span>
<span id="cb21-251"><a href="#cb21-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-252"><a href="#cb21-252" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb21-253"><a href="#cb21-253" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb21-254"><a href="#cb21-254" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL1, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"black"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-255"><a href="#cb21-255" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-256"><a href="#cb21-256" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL2, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-257"><a href="#cb21-257" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-258"><a href="#cb21-258" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL5, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-259"><a href="#cb21-259" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-260"><a href="#cb21-260" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL10, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-261"><a href="#cb21-261" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-262"><a href="#cb21-262" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k, ARL20, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">"purple"</span>, <span class="at">axes=</span>T,</span>
<span id="cb21-263"><a href="#cb21-263" aria-hidden="true" tabindex="-1"></a>    <span class="at">xlab =</span> <span class="st">"Deslocamento da Média (k)"</span>,</span>
<span id="cb21-264"><a href="#cb21-264" aria-hidden="true" tabindex="-1"></a>    <span class="at">ylab =</span> <span class="st">"Comprimento Médio de Sequência (ARL)"</span>,</span>
<span id="cb21-265"><a href="#cb21-265" aria-hidden="true" tabindex="-1"></a>    <span class="at">main =</span> <span class="st">"Comprimento Médio de Sequência vs. Deslocamento da Média"</span>,</span>
<span id="cb21-266"><a href="#cb21-266" aria-hidden="true" tabindex="-1"></a>    <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">400</span>))</span>
<span id="cb21-267"><a href="#cb21-267" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>)</span>
<span id="cb21-268"><a href="#cb21-268" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>)</span>
<span id="cb21-269"><a href="#cb21-269" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb21-270"><a href="#cb21-270" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">title=</span><span class="st">"Amostras"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty =</span> <span class="dv">1</span>,</span>
<span id="cb21-271"><a href="#cb21-271" aria-hidden="true" tabindex="-1"></a>     <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"n = 1"</span>, <span class="st">"n = 2"</span>, <span class="st">"n = 5"</span>, <span class="st">"n = 10"</span>, <span class="st">"n = 20"</span>),  </span>
<span id="cb21-272"><a href="#cb21-272" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>, <span class="st">"purple"</span>))</span>
<span id="cb21-273"><a href="#cb21-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-274"><a href="#cb21-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-275"><a href="#cb21-275" aria-hidden="true" tabindex="-1"></a><span class="fu">### Python</span></span>
<span id="cb21-276"><a href="#cb21-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-279"><a href="#cb21-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-280"><a href="#cb21-280" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-281"><a href="#cb21-281" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb21-282"><a href="#cb21-282" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb21-283"><a href="#cb21-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-284"><a href="#cb21-284" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> <span class="dv">3</span>                       <span class="co"># Nível do processo </span></span>
<span id="cb21-285"><a href="#cb21-285" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">100</span>)  <span class="co"># Valores para deslocamento</span></span>
<span id="cb21-286"><a href="#cb21-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-287"><a href="#cb21-287" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprimento Médio de Sequência</span></span>
<span id="cb21-288"><a href="#cb21-288" aria-hidden="true" tabindex="-1"></a>ARL1 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">1</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">1</span>))))</span>
<span id="cb21-289"><a href="#cb21-289" aria-hidden="true" tabindex="-1"></a>ARL2 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">2</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">2</span>))))</span>
<span id="cb21-290"><a href="#cb21-290" aria-hidden="true" tabindex="-1"></a>ARL5 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">5</span>))))</span>
<span id="cb21-291"><a href="#cb21-291" aria-hidden="true" tabindex="-1"></a>ARL10 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">10</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">10</span>))))</span>
<span id="cb21-292"><a href="#cb21-292" aria-hidden="true" tabindex="-1"></a>ARL20 <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> (norm.cdf(L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">20</span>)) <span class="op">-</span> norm.cdf(<span class="op">-</span>L <span class="op">-</span> k<span class="op">*</span>np.sqrt(<span class="dv">20</span>))))</span>
<span id="cb21-293"><a href="#cb21-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-294"><a href="#cb21-294" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb21-295"><a href="#cb21-295" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL1, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"black"</span>, label <span class="op">=</span> <span class="st">'n = 1'</span>)</span>
<span id="cb21-296"><a href="#cb21-296" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL2, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"red"</span>, label <span class="op">=</span> <span class="st">'n = 2'</span>)</span>
<span id="cb21-297"><a href="#cb21-297" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL5, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"green"</span>, label <span class="op">=</span> <span class="st">'n = 5'</span>)</span>
<span id="cb21-298"><a href="#cb21-298" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL10, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"blue"</span>, label <span class="op">=</span> <span class="st">'n = 10'</span>)</span>
<span id="cb21-299"><a href="#cb21-299" aria-hidden="true" tabindex="-1"></a>plt.plot(k, ARL20, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"purple"</span>, label <span class="op">=</span> <span class="st">'n = 20'</span>)</span>
<span id="cb21-300"><a href="#cb21-300" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Deslocamento da Média (k)'</span>)</span>
<span id="cb21-301"><a href="#cb21-301" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Comprimento Médio de Sequência (ARL)'</span>)</span>
<span id="cb21-302"><a href="#cb21-302" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Comprimento Médio de Sequência vs. Deslocamento da Média'</span>)</span>
<span id="cb21-303"><a href="#cb21-303" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>,<span class="dv">400</span>)</span>
<span id="cb21-304"><a href="#cb21-304" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Amostras'</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb21-305"><a href="#cb21-305" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">.3</span>)</span>
<span id="cb21-306"><a href="#cb21-306" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb21-307"><a href="#cb21-307" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-308"><a href="#cb21-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-309"><a href="#cb21-309" aria-hidden="true" tabindex="-1"></a>::: </span>
<span id="cb21-310"><a href="#cb21-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-311"><a href="#cb21-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-312"><a href="#cb21-312" aria-hidden="true" tabindex="-1"></a><span class="fu">## Curva Característica de Operação (CCO $\cdot R$)</span></span>
<span id="cb21-313"><a href="#cb21-313" aria-hidden="true" tabindex="-1"></a>Ao contrário da média, o gráfico de amplitude não apresenta uma distribuição simétrica, mesmo que a amostragem seja feita a partir de uma normalidade. Isso significa dizer que em um nível de operação de $3\sigma$ o risco $\alpha$ é diferente de $0.0027$, resultante para a média.</span>
<span id="cb21-314"><a href="#cb21-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-315"><a href="#cb21-315" aria-hidden="true" tabindex="-1"></a>Para a construção da CCO para o gráfico de amplitude, considera-se um intervalo relativo definido por $W=R/\sigma$, com suas propriedades de média ($E(W)=d_2$) e desvio-padrão ($\sigma_W=d_3$). Supondo que os valores dentro dos limites de controle tenham um desvio $\sigma_0$ e a oscilação do gráfico tenha resultado em um novo desvio $\sigma_1$, o risco $\beta$ é dado em função da razão dos desvios ($\sigma_1&gt;\sigma_0 \Rightarrow \sigma_1 / \sigma_0 &gt; 1$). </span>
<span id="cb21-316"><a href="#cb21-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-317"><a href="#cb21-317" aria-hidden="true" tabindex="-1"></a>Desta forma, o risco $\beta$ para um dado desvio $\sigma$, em termos de amplitude, de um nível $\sigma_0$ mudar para $\sigma_1$, sendo $\sigma_1 = \lambda\sigma_0$, pode ser descrito como</span>
<span id="cb21-318"><a href="#cb21-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-319"><a href="#cb21-319" aria-hidden="true" tabindex="-1"></a>$$\beta = P \left<span class="co">[</span><span class="ot"> LIC \leq R \leq LSC | \sigma_1 = \lambda\sigma_0 \right</span><span class="co">]</span>. $$</span>
<span id="cb21-320"><a href="#cb21-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-321"><a href="#cb21-321" aria-hidden="true" tabindex="-1"></a>Considerando os limites inferior e superior de controle como $LIE = D_3 \bar{R} = D_3\cdot d_2 \cdot \sigma_0$ e $LSE = D_4 \bar{R} = D_4\cdot d_2 \cdot \sigma_0$, respectivamente, podemos fazer os ajustes, de tal forma que</span>
<span id="cb21-322"><a href="#cb21-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-323"><a href="#cb21-323" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-324"><a href="#cb21-324" aria-hidden="true" tabindex="-1"></a>\beta = P \left<span class="co">[</span><span class="ot"> D_3\cdot d_2 \cdot \sigma_0 \leq R \leq D_4\cdot d_2 \cdot \sigma_0 | \sigma_1 = \lambda\sigma_0 \right</span><span class="co">]</span>. </span>
<span id="cb21-325"><a href="#cb21-325" aria-hidden="true" tabindex="-1"></a>$$ </span>
<span id="cb21-326"><a href="#cb21-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-327"><a href="#cb21-327" aria-hidden="true" tabindex="-1"></a>Dividindo todos os termos da expressão por $\sigma_1$, temos que</span>
<span id="cb21-328"><a href="#cb21-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-329"><a href="#cb21-329" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-330"><a href="#cb21-330" aria-hidden="true" tabindex="-1"></a>\beta = P \left<span class="co">[</span><span class="ot"> \dfrac{D_3 d_2}{\lambda} \leq W \leq \dfrac{D_4 d_2}{\lambda} \right</span><span class="co">]</span>, </span>
<span id="cb21-331"><a href="#cb21-331" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-332"><a href="#cb21-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-333"><a href="#cb21-333" aria-hidden="true" tabindex="-1"></a>onde $\lambda$ representa a razão entre os desvios ($\lambda = \sigma_1 / \sigma_0$).</span>
<span id="cb21-334"><a href="#cb21-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-335"><a href="#cb21-335" aria-hidden="true" tabindex="-1"></a>Fazendo a aproximação pela distribuição normal da medida relativa $W \sim N(d_2, d_3^2)$ com os respectivos limites de controle, os termos podem ser trabalhados em termos de função de distribuição cumulativa normal $\Phi(\cdot)$. Desta forma, a função $\beta$ pode ser expressa como</span>
<span id="cb21-336"><a href="#cb21-336" aria-hidden="true" tabindex="-1"></a>$$ \beta = \Phi \left<span class="co">[</span><span class="ot">\dfrac{\dfrac{D_4 d_2}{\lambda}-d_2}{d_3}\right</span><span class="co">]</span> - \Phi \left<span class="co">[</span><span class="ot">\dfrac{\dfrac{D_3 d_2}{\lambda}-d_2}{d_3}\right</span><span class="co">]</span>. </span>
<span id="cb21-337"><a href="#cb21-337" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-338"><a href="#cb21-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-339"><a href="#cb21-339" aria-hidden="true" tabindex="-1"></a>Progressivamente, a construção das CCOs para diferentes números de amostra depende do cruzamento entre o risco $\beta$ e a distância entre os desvios ($\lambda$).  </span>
<span id="cb21-340"><a href="#cb21-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-341"><a href="#cb21-341" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb21-342"><a href="#cb21-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-343"><a href="#cb21-343" aria-hidden="true" tabindex="-1"></a><span class="fu">### R</span></span>
<span id="cb21-344"><a href="#cb21-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-345"><a href="#cb21-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cco-rr, echo=T, include=T, cache=T, results="asis", warning=F}</span></span>
<span id="cb21-346"><a href="#cb21-346" aria-hidden="true" tabindex="-1"></a><span class="co"># Valores tabelados para d2, d3, D3 e D4</span></span>
<span id="cb21-347"><a href="#cb21-347" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.128</span>, <span class="fl">2.326</span>, <span class="fl">3.078</span>, <span class="fl">3.735</span>)</span>
<span id="cb21-348"><a href="#cb21-348" aria-hidden="true" tabindex="-1"></a>d3 <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.853</span>, <span class="fl">0.864</span>, <span class="fl">0.797</span>, <span class="fl">0.729</span>)</span>
<span id="cb21-349"><a href="#cb21-349" aria-hidden="true" tabindex="-1"></a>D3 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.223</span>, <span class="fl">0.415</span>)</span>
<span id="cb21-350"><a href="#cb21-350" aria-hidden="true" tabindex="-1"></a>D4 <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">3.267</span>, <span class="fl">2.115</span>, <span class="fl">1.777</span>, <span class="fl">1.585</span>)</span>
<span id="cb21-351"><a href="#cb21-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-352"><a href="#cb21-352" aria-hidden="true" tabindex="-1"></a><span class="co"># Diferentes valores para lambda (σ1/σ0)</span></span>
<span id="cb21-353"><a href="#cb21-353" aria-hidden="true" tabindex="-1"></a>lambda <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">6</span>, <span class="at">length.out=</span><span class="dv">100</span>)</span>
<span id="cb21-354"><a href="#cb21-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-355"><a href="#cb21-355" aria-hidden="true" tabindex="-1"></a><span class="co"># Cálculo de valores para beta</span></span>
<span id="cb21-356"><a href="#cb21-356" aria-hidden="true" tabindex="-1"></a>betal_2 <span class="ot">=</span> <span class="fu">pnorm</span>(((D4[<span class="dv">1</span>] <span class="sc">*</span> d2[<span class="dv">1</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">1</span>]) <span class="sc">/</span> d3[<span class="dv">1</span>]) <span class="sc">-</span> <span class="fu">pnorm</span>(((D3[<span class="dv">1</span>] <span class="sc">*</span> d2[<span class="dv">1</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">1</span>]) <span class="sc">/</span> d3[<span class="dv">1</span>])</span>
<span id="cb21-357"><a href="#cb21-357" aria-hidden="true" tabindex="-1"></a>betal_5 <span class="ot">=</span> <span class="fu">pnorm</span>(((D4[<span class="dv">2</span>] <span class="sc">*</span> d2[<span class="dv">2</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">2</span>]) <span class="sc">/</span> d3[<span class="dv">2</span>]) <span class="sc">-</span> <span class="fu">pnorm</span>(((D3[<span class="dv">2</span>] <span class="sc">*</span> d2[<span class="dv">2</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">2</span>]) <span class="sc">/</span> d3[<span class="dv">2</span>])</span>
<span id="cb21-358"><a href="#cb21-358" aria-hidden="true" tabindex="-1"></a>betal_10 <span class="ot">=</span> <span class="fu">pnorm</span>(((D4[<span class="dv">3</span>] <span class="sc">*</span> d2[<span class="dv">3</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">3</span>]) <span class="sc">/</span> d3[<span class="dv">3</span>]) <span class="sc">-</span> <span class="fu">pnorm</span>(((D3[<span class="dv">3</span>] <span class="sc">*</span> d2[<span class="dv">3</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">3</span>]) <span class="sc">/</span> d3[<span class="dv">3</span>])</span>
<span id="cb21-359"><a href="#cb21-359" aria-hidden="true" tabindex="-1"></a>betal_20 <span class="ot">=</span> <span class="fu">pnorm</span>(((D4[<span class="dv">4</span>] <span class="sc">*</span> d2[<span class="dv">4</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">4</span>]) <span class="sc">/</span> d3[<span class="dv">4</span>]) <span class="sc">-</span> <span class="fu">pnorm</span>(((D3[<span class="dv">4</span>] <span class="sc">*</span> d2[<span class="dv">4</span>] <span class="sc">/</span> lambda) <span class="sc">-</span> d2[<span class="dv">4</span>]) <span class="sc">/</span> d3[<span class="dv">4</span>])</span>
<span id="cb21-360"><a href="#cb21-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-361"><a href="#cb21-361" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico CCO -- R-bar</span></span>
<span id="cb21-362"><a href="#cb21-362" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb21-363"><a href="#cb21-363" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb21-364"><a href="#cb21-364" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lambda, betal_2, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, </span>
<span id="cb21-365"><a href="#cb21-365" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-366"><a href="#cb21-366" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-367"><a href="#cb21-367" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lambda, betal_5, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, </span>
<span id="cb21-368"><a href="#cb21-368" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-369"><a href="#cb21-369" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-370"><a href="#cb21-370" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lambda, beta_10, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, </span>
<span id="cb21-371"><a href="#cb21-371" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">axes=</span>F, <span class="at">xlab=</span><span class="st">""</span>,<span class="at">ylab=</span><span class="st">""</span>)</span>
<span id="cb21-372"><a href="#cb21-372" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">new =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-373"><a href="#cb21-373" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lambda, betal_20, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty=</span><span class="dv">1</span>, </span>
<span id="cb21-374"><a href="#cb21-374" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"purple"</span>, <span class="at">axes=</span>T,</span>
<span id="cb21-375"><a href="#cb21-375" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="fu">expression</span>(<span class="st">"Razão dos desvios "</span> (lambda <span class="sc">==</span> <span class="fu">frac</span>(sigma[<span class="dv">1</span>], sigma[<span class="dv">0</span>]))),</span>
<span id="cb21-376"><a href="#cb21-376" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Risco do Consumidor (β)"</span>,</span>
<span id="cb21-377"><a href="#cb21-377" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Curva Característica de Operação -- Gráfico R-bar"</span>,</span>
<span id="cb21-378"><a href="#cb21-378" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb21-379"><a href="#cb21-379" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb21-380"><a href="#cb21-380" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">title=</span><span class="st">"Amostras"</span>, <span class="at">lwd =</span> <span class="fl">1.25</span>, <span class="at">lty =</span> <span class="dv">1</span>,</span>
<span id="cb21-381"><a href="#cb21-381" aria-hidden="true" tabindex="-1"></a>     <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"n = 2"</span>, <span class="st">"n = 5"</span>, <span class="st">"n = 10"</span>, <span class="st">"n = 20"</span>),  </span>
<span id="cb21-382"><a href="#cb21-382" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>, <span class="st">"purple"</span>))</span>
<span id="cb21-383"><a href="#cb21-383" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-384"><a href="#cb21-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-385"><a href="#cb21-385" aria-hidden="true" tabindex="-1"></a><span class="fu">### Python</span></span>
<span id="cb21-386"><a href="#cb21-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-389"><a href="#cb21-389" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-390"><a href="#cb21-390" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-391"><a href="#cb21-391" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb21-392"><a href="#cb21-392" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb21-393"><a href="#cb21-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-394"><a href="#cb21-394" aria-hidden="true" tabindex="-1"></a><span class="co"># Valores tabelados para d2, d3, D3 e D4</span></span>
<span id="cb21-395"><a href="#cb21-395" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> [<span class="fl">1.128</span>, <span class="fl">2.326</span>, <span class="fl">3.078</span>, <span class="fl">3.735</span>]</span>
<span id="cb21-396"><a href="#cb21-396" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> [<span class="fl">0.853</span>, <span class="fl">0.864</span>, <span class="fl">0.797</span>, <span class="fl">0.729</span>]</span>
<span id="cb21-397"><a href="#cb21-397" aria-hidden="true" tabindex="-1"></a>D3 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.223</span>, <span class="fl">0.415</span>]</span>
<span id="cb21-398"><a href="#cb21-398" aria-hidden="true" tabindex="-1"></a>D4 <span class="op">=</span> [<span class="fl">3.267</span>, <span class="fl">2.115</span>, <span class="fl">1.777</span>, <span class="fl">1.585</span>]</span>
<span id="cb21-399"><a href="#cb21-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-400"><a href="#cb21-400" aria-hidden="true" tabindex="-1"></a><span class="co"># Diferentes valores para lambda (σ1/σ0)</span></span>
<span id="cb21-401"><a href="#cb21-401" aria-hidden="true" tabindex="-1"></a>lambdas<span class="op">=</span> np.linspace(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">100</span>) </span>
<span id="cb21-402"><a href="#cb21-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-403"><a href="#cb21-403" aria-hidden="true" tabindex="-1"></a><span class="co"># Cálculo de valores para beta</span></span>
<span id="cb21-404"><a href="#cb21-404" aria-hidden="true" tabindex="-1"></a>betal_2 <span class="op">=</span> norm.cdf(((D4[<span class="dv">0</span>] <span class="op">*</span> d2[<span class="dv">0</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">0</span>]) <span class="op">/</span> d3[<span class="dv">0</span>]) <span class="op">-</span> norm.cdf(((D3[<span class="dv">0</span>] <span class="op">*</span> d2[<span class="dv">0</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">0</span>]) <span class="op">/</span> d3[<span class="dv">0</span>])</span>
<span id="cb21-405"><a href="#cb21-405" aria-hidden="true" tabindex="-1"></a>betal_5 <span class="op">=</span> norm.cdf(((D4[<span class="dv">1</span>] <span class="op">*</span> d2[<span class="dv">1</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">1</span>]) <span class="op">/</span> d3[<span class="dv">1</span>]) <span class="op">-</span> norm.cdf(((D3[<span class="dv">1</span>] <span class="op">*</span> d2[<span class="dv">1</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">1</span>]) <span class="op">/</span> d3[<span class="dv">1</span>])</span>
<span id="cb21-406"><a href="#cb21-406" aria-hidden="true" tabindex="-1"></a>betal_10 <span class="op">=</span> norm.cdf(((D4[<span class="dv">2</span>] <span class="op">*</span> d2[<span class="dv">2</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">2</span>]) <span class="op">/</span> d3[<span class="dv">2</span>]) <span class="op">-</span> norm.cdf(((D3[<span class="dv">2</span>] <span class="op">*</span> d2[<span class="dv">2</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">2</span>]) <span class="op">/</span> d3[<span class="dv">2</span>])</span>
<span id="cb21-407"><a href="#cb21-407" aria-hidden="true" tabindex="-1"></a>betal_20 <span class="op">=</span> norm.cdf(((D4[<span class="dv">3</span>] <span class="op">*</span> d2[<span class="dv">3</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">3</span>]) <span class="op">/</span> d3[<span class="dv">3</span>]) <span class="op">-</span> norm.cdf(((D3[<span class="dv">3</span>] <span class="op">*</span> d2[<span class="dv">3</span>] <span class="op">/</span> lambdas) <span class="op">-</span> d2[<span class="dv">3</span>]) <span class="op">/</span> d3[<span class="dv">3</span>])</span>
<span id="cb21-408"><a href="#cb21-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-409"><a href="#cb21-409" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico CCO -- R-bar</span></span>
<span id="cb21-410"><a href="#cb21-410" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico comparativo das Curvas</span></span>
<span id="cb21-411"><a href="#cb21-411" aria-hidden="true" tabindex="-1"></a>plt.plot(lambdas, betal_2, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"red"</span>, label <span class="op">=</span> <span class="st">'n = 2'</span>)</span>
<span id="cb21-412"><a href="#cb21-412" aria-hidden="true" tabindex="-1"></a>plt.plot(lambdas, betal_5, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"green"</span>, label <span class="op">=</span> <span class="st">'n = 5'</span>)</span>
<span id="cb21-413"><a href="#cb21-413" aria-hidden="true" tabindex="-1"></a>plt.plot(lambdas, betal_10, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"blue"</span>, label <span class="op">=</span> <span class="st">'n = 10'</span>)</span>
<span id="cb21-414"><a href="#cb21-414" aria-hidden="true" tabindex="-1"></a>plt.plot(lambdas, betal_20, linewidth <span class="op">=</span> <span class="fl">.75</span>, color <span class="op">=</span> <span class="st">"purple"</span>, label <span class="op">=</span> <span class="st">'n = 20'</span>)</span>
<span id="cb21-415"><a href="#cb21-415" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="vs">r'Razão dos desvios </span><span class="dv">$</span><span class="er">\</span><span class="vs">lambda = </span><span class="dv">\s</span><span class="vs">igma_1/</span><span class="dv">\s</span><span class="vs">igma_0</span><span class="dv">$</span><span class="vs">'</span>)</span>
<span id="cb21-416"><a href="#cb21-416" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Risco do Consumidor (β)'</span>)</span>
<span id="cb21-417"><a href="#cb21-417" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Comprimento Médio de Sequência vs. Deslocamento da Média'</span>)</span>
<span id="cb21-418"><a href="#cb21-418" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb21-419"><a href="#cb21-419" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Amostras'</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb21-420"><a href="#cb21-420" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">.3</span>)</span>
<span id="cb21-421"><a href="#cb21-421" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb21-422"><a href="#cb21-422" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-423"><a href="#cb21-423" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-424"><a href="#cb21-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-425"><a href="#cb21-425" aria-hidden="true" tabindex="-1"></a>Nota-se que a CCO $\cdot R$ não demonstra bons resultados na detecção de mudanças para valores pequenos de amostra. Isso pode ser observado comparando os casos de $n=2$ e $n=20$; se o desvio padrão do processo dobrar (isto é, $\lambda = \sigma_1/\sigma_0 = 2$), o primeiro caso tem cerca de 30% de chance em detectar a mudança na amostra subsequente; já no segundo caso, a chance alcança 90%. Por esse motivo, a literatura recomenda o uso do gráfico $R$ para subamostras racionais maiores que 10 <span class="co">[</span><span class="ot">@Montgomery2012Statistical</span><span class="co">]</span>.</span>
<span id="cb21-426"><a href="#cb21-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-427"><a href="#cb21-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-428"><a href="#cb21-428" aria-hidden="true" tabindex="-1"></a>:::: progress</span>
<span id="cb21-429"><a href="#cb21-429" aria-hidden="true" tabindex="-1"></a>:::: {.progress-bar style="width: 100%;"}</span>
<span id="cb21-430"><a href="#cb21-430" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb21-431"><a href="#cb21-431" aria-hidden="true" tabindex="-1"></a>::::</span>
</code><button title="Copiar para a área de transferência" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>