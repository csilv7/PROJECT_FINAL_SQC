:::: progress
:::: {.progress-bar style="width: 100%;"}
::::
::::

# Índices de Capacidade

Este capítulo explora os **índices de capacidade de processo** — medidas que avaliam quão bem um processo produtivo se comporta em relação aos limites de especificação (tolerâncias), considerando tanto a variabilidade do processo quanto seu posicionamento (centralização) dentro da especificação.

## Conceitos Fundamentais

* Um processo está em **controle estatístico** quando sua variabilidade é estável ao longo do tempo, sem causas especiais (válido para aplicar índices de capacidade).

* A especificação de um produto define dois limites importantes:

  $$
  LSL = \text{Lower Specification Limit} \quad\text{e}\quad USL = \text{Upper Specification Limit}
  $$

  Estes limites definem a faixa aceitável para a característica de qualidade $X$.

* Seja $\mu$ a média do processo e $\sigma$ seu desvio-padrão (usualmente estimado a partir de dados em curto prazo / dentro de subgrupos), ou outro estimador apropriado dependendo da estabilidade do processo.

## Principais Índices: Cp, Cpl, Cpu, Cpk

### Definições

* **Cp** (capacidade potencial, ou índice de capacidade do processo) avalia apenas a dispersão do processo em relação à tolerância, assumindo que o processo está centralizado dentro dos limites:

$$
Cp = \frac{USL - LSL}{6\,\sigma}
$$

* **Cpu** e **Cpl** (capacidade em lados individualizados, superior e inferior) medem quão distante está a média do processo do limite superior ou inferior:

$$
Cpu = \frac{USL - \mu}{3\,\sigma},\qquad Cpl = \frac{\mu - LSL}{3\,\sigma}
$$

* **Cpk** (índice de capacidade corrigido ou real) considera tanto a variabilidade quanto a centralização, definindo-se como:

$$
Cpk = \min(Cpu,\, Cpl)
$$

Estas fórmulas supõem distribuição aproximadamente normal do processo, e uso de estimador de variabilidade adequado (dentro de subgrupos, quando aplicável).

### Relação entre Cp e Cpk

* Se o processo está bem centralizado ($\mu \approx (USL + LSL)/2$), então $Cpu \approx Cpl$ e $Cpk \approx Cp$.
* Se o processo está deslocado em direção a um dos limites, $Cpk < Cp$.
* Cp avalia a capacidade **potencial** (se fosse centralizado); Cpk avalia a capacidade **real**.

## Interpretação de Valores

| Faixa de índice      | Interpretação comum                                                                                                     |
| -------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| $Cp, Cpk < 1.00$     | Processo **não capaz**: partes do produto ficarão fora das especificações se mantido o nível de variabilidade atual.    |
| $Cpk = 1.00$         | Processo “barely capable”: ±3σ atinge exatamente os limites. Aproximadamente 0,27% fora de especificação se centrado.   |
| $Cpk ≈ 1.33$         | Boa prática — muitos padrões (ex: indústria automotiva) adotam esse valor como mínimo aceitável para processos maduros. |
| $Cpk ≥ 1.67$ ou mais | Excelente capacidade / processo robusto, muito raramente gerando defeitos.                                              |

Além disso:

* Comparar **Cpu** e **Cpl** ajuda identificar se o problema está com desvio em direção a LSL ou USL.
* Avaliar se Cp está significativamente maior que Cpk: indica que variabilidade pode estar ok, mas centralização está ruim.
* Verificar se o processo realmente está em estado de controle antes de usar esses índices; se não estiver, os resultados podem ser enganosos.

## Fórmulas Completas

Para relembrar:

$$
\begin{aligned}
Cp &= \frac{USL - LSL}{6 \sigma} \\
Cpu &= \frac{USL - \mu}{3 \sigma} \\
Cpl &= \frac{\mu - LSL}{3 \sigma} \\
Cpk &= \min(Cpu,\, Cpl)
\end{aligned}
$$

Também há variantes:

* **Pp**, **Ppk**: versões de longo prazo (“long term” ou “overall”) que usam estimadores de variabilidade diferentes (todos os dados, não só dentro de subgrupos). ([JMP][2])
* **Cpm**, **Cpmk**: que incorporam penalidades se o processo não tiver exatamente um alvo (*target*) prescrito.

## Cálculo Computacional em R

Aqui vão exemplos práticos para cálculo de Cp, Cpk usando R, tanto para dados simulados quanto reais.

###  Exemplo simples (dados simulados)

```{r}
# Simulação de dados
set.seed(123)
n <- 1000
mu_true <- 50
sigma_true <- 2
dados <- rnorm(n, mean = mu_true, sd = sigma_true)

USL <- 55
LSL <- 45

# Estimadores
mu_hat <- mean(dados)
sigma_hat <- sd(dados)

Cp_hat <- (USL - LSL) / (6 * sigma_hat)
Cpu_hat <- (USL - mu_hat) / (3 * sigma_hat)
Cpl_hat <- (mu_hat - LSL) / (3 * sigma_hat)
Cpk_hat <- min(Cpu_hat, Cpl_hat)

# Exibir resultados
data.frame(
  Mu = mu_hat,
  Sigma = sigma_hat,
  Cp = Cp_hat,
  Cpu = Cpu_hat,
  Cpl = Cpl_hat,
  Cpk = Cpk_hat
)
```

**Interpretação** (exemplo):

* Se $Cp_hat = 1.25$ mas $Cpk_hat = 0.90$, indica que embora a variabilidade seja razoável, a média está deslocada para um dos limites.
* Ajustes podem envolver centralizar o processo, reduzir variabilidade ou ajustar especificações, se possível.


## Considerações Práticas

* **Distribuição dos dados**: muitos índices pressupõem normalidade. Se os dados forem muito assimétricos ou com caudas pesadas, pode ser necessário usar transformações ou índices específicos para não-normais.
* **Dados em controle**: como mencionado, aplicar índices somente se o processo estiver estável em termos de variabilidade. Caso contrário, a estimativa de $\sigma$ será instável.
* **Tamanho da amostra e agrupamentos**: estimadores de $\sigma$ “dentro-subgrupos” geralmente mais confiáveis para variação de curto prazo. Para longo prazo, use variabilidade global.
* **Unilaterais vs bilaterais**: quando só um limite de especificação é crítico (por exemplo só USL ou só LSL), índices como Cpu ou Cpl têm papel importante, ou índices modificados para tolerâncias unilaterais.
* **Metas e padrões da indústria**: muitos setores (por exemplo automotivo, aeroespacial) definem metas mínimas como $Cpk \ge 1.33$ ou maior, como parte de requisitos de qualidade.
* **Relatórios e comunicação**: além dos valores numéricos, apresentar gráficos (histograma com limites, densidade, overlay de especificação) ajuda na interpretação.

## Exemplos de Interpretação e Decisão

* Se $Cp$ é alto (digamos ≥ 1.50) mas $Cpk$ é baixo (\~0.90): indica que a causa principal do problema é centralização. Pode-se ajustar médio do processo (calibrar máquina, ajuste de parâmetros de operação) para mover a média para o centro.
* Se $Cpk$ e $Cp$ ambos baixos (<1): ou variabilidade é grande demais ou processos instáveis — primeiro verificar fontes de variabilidade (equipamento, matéria-prima, ambiente, etc.), talvez mudar de processo ou especificação.
* Se o processo tem metas rígidas de qualidade ou segurança, mesmo $Cpk$ ligeiramente acima de 1 pode ser insuficiente — verificar política da empresa ou cliente.

## Extensões e Índices Derivados

* **Cpm, Cpmk**: quando há um *target* (meta) fixo que não é necessariamente o centro entre os limites, penalizando desvios deste alvo. ([JMP][2])
* **Índices para distribuições não-normais**: adaptações via quantis ou transformações.
* **Análise multivariada de capacidade**: quando características de qualidade múltiplas devem simultaneamente atender limites, usando PCA ou índices multivariados.

## Referências para Consulta

As referências usadas foram @Montgomery2012Statistical, @kotz1993process, @sahay2014process, @benkova2024evaluation, @grau2007generalization e @pci_r_package.

:::: progress
:::: {.progress-bar style="width: 100%;"}
::::
::::
